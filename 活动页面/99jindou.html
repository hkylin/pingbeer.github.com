
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="stylesheet" href="//best110.oss-cn-shanghai.aliyuncs.com/SPDB/resources/css/framework7.ios.min.css">
<link rel="stylesheet" href="//best110.oss-cn-shanghai.aliyuncs.com/SPDB/resources/css/framework7.ios.colors.min.css">
<link rel="stylesheet" href="//best110.oss-cn-shanghai.aliyuncs.com/SPDB/resources/css/my-app.css">

<script type="text/javascript" src="//best110.oss-cn-shanghai.aliyuncs.com/PUBLIC/resources/js/jquery/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="//best110.oss-cn-shanghai.aliyuncs.com/PUBLIC/resources/js/layer/layer.js" charset="utf-8"></script>
<title>确认订单</title>
<style type="text/css">
#form {
height:100%;
}
</style>
</head>
  <body>
<div class="views">
<div class="view view-main">
<div class="pages">
<div class="page" data-page="home">
<div class="page-content">


	<form name="form" id="form" class="form" action="/SPDB/gold99/gold99ConfirmOrder" method="post">
    <div class="views">
      <div class="divBg">
        <div class="pay-head">
          <div class="pay-head-imgBg">
            <img class="pay-zhanweitu" src="//best110.oss-cn-shanghai.aliyuncs.com/SPDB/resources/image/logo/PR201708231468.jpg" />
          </div>
          <span class="pay-titBg">
            <p class="pay-head-tit">格瓦拉《二次初恋》影票</p>
            <p class="pay-head-num">99金豆</p>
          </span>
        </div>
        <div class="pay-numBg">
          <p class="pay-num">数量：x1</p>
        </div>
        <div class="pay-user-iphone-numBg">
          <input id="phoneNo" class="pay-user-iphone-num" type="text" name="phoneNo" placeholder="请输入您的手机号码" />
          <hr style="width: 100%;height: 2px;margin: 0;padding: 0;border: 0;background-color: #efeff4;" />
          <input id="rePhoneNo" class="pay-user-iphone-num" type="text" name="rePhoneNo" placeholder="再次输入手机号码" />
        </div>
        <div class="pay-user-iphone-codeBg">
          <input id="imageCode" class="pay-user-iphone-code" type="text" name="imageCode" placeholder="请输入验证码" />
          <span class="pay-user-iphone-codeImg"><img id="imgObj" alt="验证码" src="/SPDB/front/validateCode/codeGenerator" onclick="changeImg()"/></span>
        </div>
        <input type="hidden" name="_token" value="F8FE0538132C58063D7D980A37851238"/>
        <input type="hidden" name="proId" value="PR201708231468"/>
        <a class="pay-goPay" href="javascript:void(0)" onclick="ajxSubmit()">确认支付</a>
      </div>
    </div>
    </form>
    
    
</div>
</div>
</div>
</div>
</div>
  </body>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?219194536a886dbe28799165f3f1f4e6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script type="text/javascript">
function ajxSubmit(){
	//验证手机号
	var phoneNo = $("input[id='phoneNo']").val();	//手机号
	var rePhoneNo = $("input[id='rePhoneNo']").val();	//确认手机号
	var imageCode = $("input[id='imageCode']").val();	//确认手机号
	var _token = $("input[name='_token']").val();	//确认手机号
	var proId = $("input[name='proId']").val();	//确认手机号
    if(phoneNo == null || rePhoneNo == null || phoneNo == '' || rePhoneNo == ''){
    	layer.msg("手机号码不能为空");
		return false;
    }
	if (phoneNo != rePhoneNo) {
		layer.msg("两次输入手机号码不一致");
		return false;
	}
	if(phoneNo.length!==11){
		layer.msg("手机号格式不正确");
		return false;
	}
	if(imageCode == null || imageCode == ""){
		layer.msg("图片验证码不能为空");
		return false;
	}
	//ajax异步请求
$("#form").submit();
}
//刷新图片  
function changeImg() {  
    var imgSrc = $("#imgObj");  
    var src = imgSrc.attr("src");
    console.log("src:"+src);
    imgSrc.attr("src", changeUrl(src));  
}  
//为了使每次生成图片不一致，即不让浏览器读缓存，所以需要加上时间戳  
function changeUrl(url) {  
    var timestamp = (new Date()).valueOf();
    console.log("timestamp:"+timestamp);
    var index = url.indexOf("?",url);
    console.log("index:"+index);
    if (index > 0) {  
        url = url.substring(0, url.indexOf("?"));
    }
    if ((url.indexOf("&") >= 0)) {  
        url = url + "×tamp=" + timestamp;  
    } else {  
        url = url + "?timestamp=" + timestamp;
    }
    console.log("url:"+url);
    return url;  
}
</script>
</html>
